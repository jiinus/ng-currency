"undefined"!=typeof module&&"undefined"!=typeof exports&&module.exports===exports&&(module.exports="ng-currency"),angular.module("ng-currency",[]).directive("ngCurrency",["$filter","$locale",function(e,n){return{require:"ngModel",scope:{},link:function(r,t,o,i){function u(e){return RegExp("\\d|\\-|\\"+e,"g")}function a(e){return RegExp("\\-{0,1}((\\"+e+")|([0-9]{1,}\\"+e+"?))&?[0-9]{0,"+r.fraction+"}","g")}function c(t){t=String(t);var o=n.NUMBER_FORMATS.DECIMAL_SEP,i=null;-1==t.indexOf(n.NUMBER_FORMATS.DECIMAL_SEP)&&-1!=t.indexOf(".")&&r.fraction&&(o=".");var c=e("currency")("-1",f(),r.fraction),l=RegExp("[0-9."+n.NUMBER_FORMATS.DECIMAL_SEP+n.NUMBER_FORMATS.GROUP_SEP+"]+"),s=c.replace(l.exec(c),""),d=t.replace(l.exec(t),"");return s==d&&(t="-"+l.exec(t)),RegExp("^-[\\s]*$","g").test(t)&&(t="-0"),u(o).test(t)&&(i=t.match(u(o)).join("").match(a(o)),i=i?i[0].replace(o,"."):null),i}function f(){return angular.isDefined(r.currencySymbol)?r.currencySymbol:n.NUMBER_FORMATS.CURRENCY_SYM}function l(){for(var e=i.$formatters,n=e.length,r=i.$$rawModelValue;n--;)r=e[n](r);i.$setViewValue(r),i.$render()}"false"!==o.ngCurrency&&(o.$observe("min",function(e){r.min=e}),o.$observe("max",function(e){r.max=e}),o.$observe("currencySymbol",function(e){r.currencySymbol=e}),o.$observe("ngRequired",function(e){r.ngRequired=e}),o.$observe("fraction",function(e){r.fraction=e}),r.fraction="undefined"!=typeof r.fraction?r.fraction:2,i.$parsers.push(function(e){var n=c(e);return"."!=n&&"-."!=n||(n=".0"),parseFloat(n)}),t.on("blur",function(){i.$commitViewValue(),l()}),i.$formatters.unshift(function(n){return e("currency")(n,f(),r.fraction)}),i.$validators.min=function(e){return!r.ngRequired&&isNaN(e)?!0:"undefined"!=typeof r.min?e>=parseFloat(r.min):!0},r.$watch("min",function(e){i.$validate()}),i.$validators.max=function(e){return!r.ngRequired&&isNaN(e)?!0:"undefined"!=typeof r.max?e<=parseFloat(r.max):!0},r.$watch("max",function(e){i.$validate()}),i.$validators.fraction=function(e){return!e||!isNaN(e)},r.$on("currencyRedraw",function(){i.$commitViewValue(),l()}),t.on("focus",function(){var n=i.$$rawModelValue;n=isNaN(n)||""===n||null==n?"":e("number")(parseFloat(n),r.fraction),i.$setViewValue(n),i.$render()}))}}}]);
//# sourceMappingURL=ng-currency.min.js.map